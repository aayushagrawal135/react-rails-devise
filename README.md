# Secret Code app

## Start on localhost

`gem install bundler -v 2.14`

`bundle install`

`rake db:migrate` 

`rake db:seed` (optional)

`rails s`

## Description

App has Rails backend and React frontend. [Devise](https://github.com/heartcombo/devise) gem is used for authentication. Authentication includes login, logout and sign up. Actions like delete user, confirmation over mail, reset password are not present. Every user has a unique code corresponding to itself that it enters while signing up. Once signed in, a user can generate more codes but it will not belong to that user. As a result there would two possibilities, (code) and (code, user). The list of the same is displayed to a signed in user only.

## Code flow

Any user when tries to render the index page, a before action check is made to validate if the user is signed in. If not, flow is redirected to the login page (generated by devise views). Also, a user who is not signed in, will not be able to open the dropdown to generate more secret codes. Once all validations are met and the user is signed in, it will be able to see the list of (code, user/null) since unlike earlier, now the GET request wont be redirected to login page.

The user can click on the dropdown menu item, and when done so, a POST request containing the number of secret codes requested will be sent to rails. It will create requested number of secret codes (random strings) and return it in the response which will be concated to state of the index component of react. The change in state will cause a re-render with new values.

If a user enters a secret code that had already been generated but had no user association, a new pair of (user, secret code) is not created. Instead, the previous secret code is updated with the user.

When displaying Login/Logout button, a request is sent to rails which checks if the user is signed in, and returns a boolean value in the response. Depending on the response, either login or logout button is set.

## Reference

https://gist.github.com/siddhant-mohan/a42e2f26fc992ac1b2ca